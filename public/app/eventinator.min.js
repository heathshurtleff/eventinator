angular.module("eventinator",["ui.router","ngResource"]);angular.module("eventinator").config(["$stateProvider","$urlRouterProvider",function(e,n){n.otherwise("/");e.state("main",{url:"/",templateUrl:"app/main/eventList.html"}).state("signup",{url:"/signup",templateUrl:"app/signup/eventSignup.html",controller:"eventSignupCtrl"})}]);angular.module("eventinator").controller("eventinatorCtrl",["$scope","eventIdentity","authService","$location",function(e,n,r,a){e.identity=n;e.signout=function(){r.logoutUser().then(function(){e.emial="";e.password="";a.path("/")})}}]);angular.module("eventinator").factory("authService",["$q","$http","eventUser","eventIdentity",function(e,n,r,a){return{createEvtUser:function(n){var t=new r(n),o=e.defer();t.$save().then(function(){a.currentUser=t;o.resolve()},function(e){o.reject(e.data.reason)});return o.promise},logoutUser:function(){var r=e.defer();n.post("/app/logout",{logout:!0}).then(function(){a.currentUser=void 0;r.resolve()});return r.promise}}}]);angular.module("eventinator").factory("eventIdentity",["$window","eventUser",function(e,n){var r;if(e.bootstrappedEventUser){r=new n;angular.extend(r,e.bootstrappedEventUser)}return{currentUser:r,authenticated:function(){return!!this.currentUser}}}]);angular.module("eventinator").controller("eventSignupCtrl",["$scope","$location","eventUser","authService",function(e,n,r,a){function t(e){var n=e.val(),r={upper:n.search(/[A-Z]/g)>-1,lower:n.search(/[a-z]/g)>-1,num:n.search(/[0-9]/g)>-1,punct:n.search(/[!#$@_'+,?\[\].-]/g)>-1,chars:n.length>=8};o(r)}function o(e){var n=$(".pass-confirm-container"),r=n.find(".requirement-box"),a=$(".pwd-popover").find(".arrow");r.removeClass("valid");a.removeClass("valid");e.upper&&n.find(".upper").addClass("valid");e.lower&&n.find(".lower").addClass("valid");if(e.num){n.find(".num").addClass("valid");a.addClass("valid")}e.punct&&n.find(".punct").addClass("valid");e.chars&&n.find(".chars").addClass("valid")}function s(e,n){var r=e.data("bs.popover");r.tip().find(".popover-content").text(n)}e.eventSignup=function(){({email:e.email,password:e.password,fullName:e.fullName,company:e.company,job:e.job,bday:e.bday,homeAddress:e.homeAddress})};var i=$('#eventSignUpForm input[id!="password"]'),d=$("#password");d.popover({container:"body",content:'<div class="pass-confirm-container"><div class="requirement-box upper">A</div><div class="requirement-box lower">a</div><div class="requirement-box num">0-9</div><div class="requirement-box punct">!&amp;?</div><div class="requirement-box chars">8+</div></div>',html:!0,placement:"top",trigger:"focus",template:'<div class="popover pwd-popover"><div class="arrow"></div><div class="popover-content"></div></div>'});$(function(){$("[data-toggle=popover]").popover()});i.on("keyup blur",function(){var e=$(this),n=e.parents(".has-feedback"),r=n.find(".form-control-feedback");if(e.hasClass("ng-invalid")){n.addClass("has-error");r.addClass("glyphicon-remove");e.hasClass("ng-invalid-required")?s(e,"Your "+e.attr("id")+" is required"):e.hasClass("ng-invalid-minlength")?s(e,"Must be at least "+e.attr("ng-minlength")+" characters"):e.hasClass("ng-invalid-email")&&s(e,"Invalid email address")}else if(e.hasClass("ng-valid")){n.removeClass("has-error");r.removeClass("glyphicon-remove");n.addClass("has-success");r.addClass("glyphicon-ok");s(e,"Looks good!")}});d.on("focus keyup",function(){t($(this))})}]);angular.module("eventinator").factory("eventUser",["$resource",function(e){var n=e("/app/eventUsers/:id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return n}]);